var SAPA_NEWSLETTER=(()=>{var B=Object.create;var N=Object.defineProperty,k=Object.defineProperties,W=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,X=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var C=(r,e,t)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,m=(r,e)=>{for(var t in e||(e={}))w.call(e,t)&&C(r,t,e[t]);if(S)for(var t of S(e))b.call(e,t)&&C(r,t,e[t]);return r},h=(r,e)=>k(r,V(e));var D=(r,e)=>{var t={};for(var a in r)w.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&S)for(var a of S(r))e.indexOf(a)<0&&b.call(r,a)&&(t[a]=r[a]);return t};var Y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Q=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of q(e))!w.call(r,n)&&n!==t&&N(r,n,{get:()=>e[n],enumerable:!(a=W(e,n))||a.enumerable});return r};var v=(r,e,t)=>(t=r!=null?B(X(r)):{},Q(e||!r||!r.__esModule?N(t,"default",{value:r,enumerable:!0}):t,r));var _=Y(($e,le)=>{le.exports={newsletters:[{id:"2026-Q1",title:"SAPA PHILATEX First Quarter 2026",quarter:"First",year:2026,publishDate:"2026-01-01",filePath:"public/SAPA-PHILATEX-First-Quarter-2026.pdf",description:"First Quarter 2026 newsletter featuring new editor Jim Durham's introduction, Q1 meeting calendar with updated location at MacArthur Park Lutheran Church, USPS 2026 stamp preview, and updated Board of Governors listing.",featuredArticles:[{title:"New Editor Introduction",category:"News",page:1},{title:"USPS 2026 Stamp Preview",category:"Feature",page:2},{title:"Q1 2026 Meeting Calendar",category:"Calendar",page:1}],highlights:["New newsletter editor Jim Durham introduced","Preview of USPS 2026 stamp releases","Complete January-March 2026 meeting schedule","Updated Board of Governors listing","New meeting location: MacArthur Park Lutheran Church"],tags:["2026","Q1","new-editor","usps","meetings","calendar"],pageCount:3,fileSize:"268 KB",status:"published"},{id:"2025-Q4",title:"SAPA PHILATEX Fourth Quarter 2025",quarter:"Fourth",year:2025,publishDate:"2025-10-01",filePath:"public/SAPA-PHILATEX-Fourth-Quarter-2025.pdf",description:"Features the October-December meeting calendar, year-end activities, holiday schedule adjustments, 2026 membership renewal information, upcoming stamp shows, and special programs on postal history and rare stamp collections.",featuredArticles:[{title:"Year in Review",category:"Annual Report",page:3},{title:"Holiday Collecting Guide",category:"Feature",page:5},{title:"2026 Membership Information",category:"News",page:8}],highlights:["October-December meeting calendar","Holiday schedule adjustments","2026 membership renewal","Year-end auction information","Upcoming stamp shows and exhibitions"],tags:["2025","Q4","holidays","year-end","membership","meetings"],pageCount:12,fileSize:"2.5 MB",status:"published"},{id:"2025-Q3",title:"SAPA PHILATEX Third Quarter 2025",quarter:"Third",year:2025,publishDate:"2025-07-01",filePath:"public/SAPA-PHILATEX-Third-Quarter-2025.pdf",description:'Features the July-September meeting calendar, annual "Blue Chip" auction details, Greater Houston Stamp Show information, TSDA show schedule, 2025 membership drive, and programs on US Air Mail History and Classic Mexican Stamps.',featuredArticles:[{title:"US Air Mail History",category:"History",page:3},{title:"Classic Mexican Stamps",category:"Feature",page:5},{title:"Blue Chip Auction Preview",category:"News",page:7}],highlights:["July-September meeting calendar","Annual Blue Chip auction details","Greater Houston Stamp Show information","TSDA show schedule","2025 membership drive"],tags:["2025","auction","meetings","air-mail","mexican-stamps","houston-show"],pageCount:12,fileSize:"2.1 MB",status:"published"},{id:"2025-Q2",title:"SAPA PHILATEX Second Quarter 2025",quarter:"Second",year:2025,publishDate:"2025-04-01",filePath:"public/SAPA PHILATEX Second Quarter 2025.pdf",description:"Contains the April-June meeting schedule, club updates, member spotlights, and special features on recent philatelic discoveries and collecting tips for the spring season.",featuredArticles:[{title:"Spring Collecting Tips",category:"Collection Tips",page:2},{title:"Recent Philatelic Discoveries",category:"Feature",page:4},{title:"Member Spotlight: John Smith",category:"Member Spotlight",page:6}],highlights:["April-June meeting schedule","Club updates","Member spotlights","Recent philatelic discoveries","Spring collecting tips"],tags:["2025","spring","collecting-tips","discoveries","member-spotlight"],pageCount:10,fileSize:"1.8 MB",status:"published"}],metadata:{lastUpdated:"2026-01-01T00:00:00.000Z",totalIssues:4,latestIssue:"2026-Q1",version:"1.0"}}});var F={DEBOUNCE_DEFAULT:500,DEBOUNCE_SEARCH:300,THROTTLE_DEFAULT:1e3,ANIMATION_FRAME_FALLBACK:16,NOTIFICATION_AUTO_DISMISS:1e4,NOTIFICATION_SHORT:2e3,REMINDER_CHECK_INTERVAL:6e4,REMINDER_AUTO_DISMISS:15e3,COPY_FEEDBACK_DURATION:1500,FORM_MESSAGE_SUCCESS_DURATION:1e4,RSVP_CONFIRMATION_DURATION:3e3,RETRY_DELAY_BASE:1e3,SERVICE_WORKER_UPDATE_DISMISS:1e4};var z={GA_MEASUREMENT_ID:"G-XXXXXXXXXX",EVENTS:{PAGE_VIEW:"page_view",FORM_SUBMIT:"form_submit",FILE_DOWNLOAD:"file_download",NEWSLETTER_DOWNLOAD:"newsletter_download",MEETING_RSVP:"meeting_rsvp",SEARCH:"search",RESOURCE_VIEW:"resource_view"}},Ne=h(m({},z.EVENTS),{CONTACT_FORM_SUBMIT:"contact_form_submit",SEARCH_PERFORMED:"search_performed",REMINDER_SET:"reminder_set"});var E={PAGE_SIZE:10,MAX_SEARCH_RESULTS:50,IMAGE_QUALITY:.85,COMPRESSION_LEVEL:9,CACHE_DURATION:3600,SESSION_TIMEOUT:1800};function R(r,e=F.DEBOUNCE_DEFAULT){if(typeof r!="function")throw new TypeError("First argument must be a function");let t;return function(...n){let o=()=>{clearTimeout(t),r(...n)};clearTimeout(t),t=setTimeout(o,e)}}var c={isDevelopment:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",isProduction:window.location.protocol==="https:",isDebug:window.location.search.includes("debug=true")},M={enableReminders:!0,enableAnalytics:c.isProduction,enableServiceWorker:c.isProduction,enableDebugLogging:c.isDevelopment||c.isDebug,enableCaching:!0,enableOfflineMode:!0},K={baseURL:c.isDevelopment?"http://localhost:3000":"",timeout:3e4,retries:3,cacheTimeout:E.CACHE_DURATION*1e3},j={prefix:"sapa_",version:"1.0",maxAge:E.SESSION_TIMEOUT*1e3},J={formats:["webp","jpg"],sizes:[320,640,960,1280,1920],quality:E.IMAGE_QUALITY,lazyLoadOffset:50},Z={minSearchLength:2,maxResults:E.MAX_SEARCH_RESULTS,debounceDelay:300,highlightMatches:!0},ee={autoSave:!0,autoSaveInterval:3e4,maxRetries:3,showProgressIndicator:!0},te={defaultView:"month",firstDayOfWeek:0,showWeekNumbers:!1,allowPastDates:!1,maxFutureMonths:12},re={position:"top-right",duration:5e3,maxNotifications:3,soundEnabled:!1},ne={enableLazyLoading:!0,enableCodeSplitting:!0,enablePrefetch:c.isProduction,enableCompression:c.isProduction,reportWebVitals:c.isProduction},ae={enableCSRF:!0,enableRateLimit:!0,rateLimitMax:3,rateLimitWindow:36e5,allowedOrigins:["https://sastamps.org","https://www.sastamps.org"]},y={level:c.isDevelopment?"debug":"error",enableConsole:!0,enableRemote:c.isProduction,remoteEndpoint:"/api/logs"};var oe={env:c,features:M,api:K,storage:j,image:J,search:Z,form:ee,calendar:te,notification:re,performance:ne,security:ae,logging:y};Object.freeze(oe);Object.freeze(c);Object.freeze(M);var i={DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},f={[i.DEBUG]:"DEBUG",[i.INFO]:"INFO",[i.WARN]:"WARN",[i.ERROR]:"ERROR",[i.FATAL]:"FATAL"},A=class r{constructor(e="App",t=y){this.name=e,this.config=t,this.level=this.parseLevel(t.level)}parseLevel(e){return{debug:i.DEBUG,info:i.INFO,warn:i.WARN,error:i.ERROR,fatal:i.FATAL}[e.toLowerCase()]||i.INFO}shouldLog(e){return e>=this.level}formatMessage(e,t,a={}){return h(m({timestamp:new Date().toISOString(),level:f[e],logger:this.name,message:t},a),{url:window.location.href,userAgent:navigator.userAgent})}logToConsole(e){if(!this.config.enableConsole)return;let s=e,{level:t,message:a}=s,n=D(s,["level","message"]),o=`[${e.timestamp}] [${t}] [${this.name}]`;switch(t){case f[i.DEBUG]:console.debug(o,a,n);break;case f[i.INFO]:console.info(o,a,n);break;case f[i.WARN]:console.warn(o,a,n);break;case f[i.ERROR]:case f[i.FATAL]:console.error(o,a,n);break}}async logToRemote(e){if(!(!this.config.enableRemote||!c.isProduction))try{await fetch(this.config.remoteEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.error("Failed to send log to remote:",t)}}log(e,t,a={}){if(!this.shouldLog(e))return;let n=this.formatMessage(e,t,a);this.logToConsole(n),e>=i.ERROR&&this.logToRemote(n)}debug(e,t={}){this.log(i.DEBUG,e,t)}info(e,t={}){this.log(i.INFO,e,t)}warn(e,t={}){this.log(i.WARN,e,t)}error(e,t={}){t instanceof Error&&(t={error:{message:t.message,stack:t.stack,name:t.name}}),this.log(i.ERROR,e,t)}fatal(e,t={}){t instanceof Error&&(t={error:{message:t.message,stack:t.stack,name:t.name}}),this.log(i.FATAL,e,t)}async time(e,t){let a=performance.now();try{let n=await t(),o=performance.now()-a;return this.debug(`${e} completed`,{duration:`${o.toFixed(2)}ms`}),n}catch(n){let o=performance.now()-a;throw this.error(`${e} failed`,{duration:`${o.toFixed(2)}ms`,error:n}),n}}child(e){return new r(`${this.name}:${e}`,this.config)}},be=new A;function d(r){return new A(r)}var se=d("SafeDOM");function T(r,e=document){try{return e.querySelector(r)}catch(t){return se.warn(`Failed to query selector "${r}":`,t),null}}var P=d("EventCleanup"),p=new Map;function u(r,e,t,a){if(!r||typeof r.addEventListener!="function"){P.warn("Invalid element provided to addEventListenerWithCleanup");return}r.addEventListener(e,t,a),p.has(r)||p.set(r,[]),p.get(r).push({event:e,handler:t,options:a})}function ie(r=null){if(r){let e=p.get(r);e&&(e.forEach(({event:t,handler:a,options:n})=>{r.removeEventListener(t,a,n)}),p.delete(r))}else p.forEach((e,t)=>{e.forEach(({event:a,handler:n,options:o})=>{try{t.removeEventListener(a,n,o)}catch(s){P.warn("Failed to remove event listener:",s)}})}),p.clear()}typeof window!="undefined"&&window.addEventListener("beforeunload",()=>{ie()});var x=d("Breadcrumb"),L=class{constructor(){this.container=null,this.defaultHome={text:"Home",href:"/"},this.separator="\u203A"}init(e="breadcrumb-nav"){if(this.container=document.getElementById(e),!this.container){x.warn("Breadcrumb container not found");return}this.generateBreadcrumb()}generateBreadcrumb(){let e=window.location.pathname,t=e.split("/").filter(l=>l),a=[this.defaultHome],n=document.title.split(" - ")[0],o=t[t.length-1]||"index.html",s={"index.html":null,"meetings.html":{text:"Meetings",href:"/meetings.html"},"newsletter.html":{text:"Newsletters",href:"/newsletter.html"},"resources.html":{text:"Resources",href:"/resources.html"},"glossary.html":{text:"Glossary",href:"/glossary.html"},"contact.html":{text:"Contact",href:"/contact.html"},"search.html":{text:"Search",href:"/search.html"}};if(e.includes("/newsletters/")?(a.push({text:"Newsletters",href:"/newsletter.html"}),a.push({text:n,href:e,current:!0})):e.includes("/resources/")?(a.push({text:"Resources",href:"/resources.html"}),a.push({text:n,href:e,current:!0})):s[o]&&a.push(h(m({},s[o]),{current:!0})),a.length<=1){this.container.style.display="none";return}this.render(a)}render(e){let t=document.createElement("nav");t.setAttribute("aria-label","Breadcrumb"),t.className="breadcrumb-navigation";let a=document.createElement("ol");a.className="breadcrumb-list",e.forEach((n,o)=>{let s=document.createElement("li");if(s.className="breadcrumb-item",n.current)s.setAttribute("aria-current","page"),s.textContent=n.text;else{let l=document.createElement("a");l.href=n.href,l.textContent=n.text,s.appendChild(l)}if(a.appendChild(s),o<e.length-1){let l=document.createElement("span");l.className="breadcrumb-separator",l.setAttribute("aria-hidden","true"),l.textContent=` ${this.separator} `,a.appendChild(l)}}),t.appendChild(a),this.container.innerHTML="",this.container.appendChild(t)}setBreadcrumb(e){if(!this.container){x.warn("Breadcrumb not initialized");return}this.render([this.defaultHome,...e])}updateCurrent(e){let t=this.container.querySelector('[aria-current="page"]');t&&(t.textContent=e)}},G=new L;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>G.init()):G.init();var O=d("NewsletterPage");async function H(){let r=T("#newsletters-container");r&&await ce(r);let e=T("#newsletter-search");e&&ue(e);let t=T("#newsletter-filters");t&&fe(t)}async function ce(r){try{let{default:e}=await Promise.resolve().then(()=>v(_())),a=e.newsletters.sort((n,o)=>new Date(o.date)-new Date(n.date)).map(n=>`
            <article class="newsletter-item" data-date="${n.date}" data-year="${new Date(n.date).getFullYear()}">
                <div class="newsletter-preview">
                    ${n.coverImage?`<img src="${n.coverImage}" alt="Cover of ${n.title}" loading="lazy">`:'<div class="newsletter-placeholder">\u{1F4F0}</div>'}
                </div>
                
                <div class="newsletter-content">
                    <header class="newsletter-header">
                        <h3>${n.title}</h3>
                        <time datetime="${n.date}" class="newsletter-date">
                            ${new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}
                        </time>
                    </header>
                    
                    <div class="newsletter-details">
                        ${n.summary?`<p class="newsletter-summary">${n.summary}</p>`:""}
                        
                        ${n.features&&n.features.length>0?`
                            <div class="newsletter-features">
                                <h4>Featured Articles:</h4>
                                <ul>
                                    ${n.features.map(o=>`<li>${o}</li>`).join("")}
                                </ul>
                            </div>
                        `:""}
                        
                        <div class="newsletter-meta">
                            <span class="newsletter-pages">${n.pages||"Multiple"} pages</span>
                            ${n.fileSize?`<span class="newsletter-size">${n.fileSize}</span>`:""}
                        </div>
                    </div>
                    
                    <footer class="newsletter-actions">
                        <a href="${n.pdfUrl}" target="_blank" class="btn-primary btn-view-pdf" data-newsletter-id="${n.id}">
                            \u{1F4C4} View PDF
                        </a>
                        <button class="btn-secondary btn-download" data-url="${n.pdfUrl}" data-title="${n.title}">
                            \u{1F4BE} Download
                        </button>
                        ${n.articleLinks&&n.articleLinks.length>0?`
                            <details class="newsletter-articles">
                                <summary>Articles (${n.articleLinks.length})</summary>
                                <ul>
                                    ${n.articleLinks.map(o=>`
                                        <li><a href="${o.url}" target="_blank">${o.title}</a></li>
                                    `).join("")}
                                </ul>
                            </details>
                        `:""}
                    </footer>
                </div>
            </article>
        `).join("");r.innerHTML=a,ge(r)}catch(e){O.error("Failed to load newsletters:",e),r.innerHTML='<p class="error-message">Unable to load newsletters. Please try again later.</p>'}}function ue(r){r.innerHTML=`
        <div class="search-container">
            <input type="search" id="newsletter-search-input" placeholder="Search newsletters..." aria-label="Search newsletters">
            <button id="newsletter-search-button" aria-label="Search">\u{1F50D}</button>
        </div>
        <div id="search-results" class="search-results" aria-live="polite"></div>
    `;let e=r.querySelector("#newsletter-search-input"),t=r.querySelector("#newsletter-search-button"),a=r.querySelector("#search-results"),n=R(async o=>{if(!o.trim()){a.innerHTML="",me();return}try{let{default:s}=await Promise.resolve().then(()=>v(_())),l=de(s.newsletters,o);l.length===0?(a.innerHTML="<p>No newsletters found matching your search.</p>",he()):(a.innerHTML=`<p>Found ${l.length} newsletter${l.length!==1?"s":""}</p>`,pe(l))}catch(s){O.error("Search failed:",s),a.innerHTML="<p>Search temporarily unavailable.</p>"}},300);u(e,"input",o=>{n(o.target.value)}),u(t,"click",()=>{n(e.value)}),u(e,"keypress",o=>{o.key==="Enter"&&n(e.value)})}function de(r,e){let t=e.toLowerCase().split(" ");return r.filter(a=>{let n=[a.title,a.summary,...a.features||[],new Date(a.date).toLocaleDateString()].join(" ").toLowerCase();return t.every(o=>n.includes(o))})}function pe(r){document.querySelectorAll(".newsletter-item").forEach(t=>{let a=t.dataset.date,n=r.some(o=>o.date===a);t.style.display=n?"block":"none"})}function me(){document.querySelectorAll(".newsletter-item").forEach(e=>{e.style.display="block"})}function he(){document.querySelectorAll(".newsletter-item").forEach(e=>{e.style.display="none"})}function fe(r){let e=new Date().getFullYear(),t=Array.from({length:5},(l,g)=>e-g);r.innerHTML=`
        <div class="filter-group">
            <label for="year-filter">Year:</label>
            <select id="year-filter">
                <option value="">All Years</option>
                ${t.map(l=>`<option value="${l}">${l}</option>`).join("")}
            </select>
        </div>
        
        <div class="filter-group">
            <label for="sort-filter">Sort By:</label>
            <select id="sort-filter">
                <option value="date-desc">Newest First</option>
                <option value="date-asc">Oldest First</option>
                <option value="title-asc">Title A-Z</option>
                <option value="title-desc">Title Z-A</option>
            </select>
        </div>
        
        <button id="clear-filters" class="btn-secondary">Clear Filters</button>
    `;let a=r.querySelector("#year-filter"),n=r.querySelector("#sort-filter"),o=r.querySelector("#clear-filters"),s=R(()=>{let l=document.querySelectorAll(".newsletter-item"),g=a.value,U=n.value,$=Array.from(l).filter(I=>g&&I.dataset.year!==g?(I.style.display="none",!1):(I.style.display="block",!0));Ee($,U)},300);u(a,"change",s),u(n,"change",s),u(o,"click",()=>{a.value="",n.value="date-desc",s()})}function Ee(r,e){var a;let t=(a=r[0])==null?void 0:a.parentElement;t&&(r.sort((n,o)=>{switch(e){case"date-desc":return new Date(o.dataset.date)-new Date(n.dataset.date);case"date-asc":return new Date(n.dataset.date)-new Date(o.dataset.date);case"title-asc":return n.querySelector("h3").textContent.localeCompare(o.querySelector("h3").textContent);case"title-desc":return o.querySelector("h3").textContent.localeCompare(n.querySelector("h3").textContent);default:return 0}}),r.forEach(n=>{t.appendChild(n)}))}function ge(r){r.querySelectorAll(".btn-download").forEach(a=>{u(a,"click",n=>{let{url:o}=n.target.dataset,{title:s}=n.target.dataset;Se(o,s)})}),r.querySelectorAll(".btn-view-pdf").forEach(a=>{u(a,"click",n=>{let{newsletterId:o}=n.target.dataset;Ae(o)})})}function Se(r,e){try{let t=document.createElement("a");t.href=r,t.download=`${e}.pdf`,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),Te(e)}catch(t){O.error("Download failed:",t),alert("Download failed. Please try opening the PDF in a new tab.")}}function Ae(r){typeof gtag=="function"&&gtag("event","newsletter_view",{newsletter_id:r})}function Te(r){typeof gtag=="function"&&gtag("event","newsletter_download",{newsletter_title:r})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",H):H();})();
