var SAPA_NEWSLETTER=(()=>{var y=Object.create;var S=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var D=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var C=(t,r,a,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of R(r))!w.call(t,e)&&e!==a&&S(t,e,{get:()=>r[e],enumerable:!(n=_(r,e))||n.enumerable});return t};var f=(t,r,a)=>(a=t!=null?y(L(t)):{},C(r||!t||!t.__esModule?S(a,"default",{value:t,enumerable:!0}):a,t));var m=D((Z,v)=>{v.exports={newsletters:[{id:"2025-Q4",title:"SAPA PHILATEX Fourth Quarter 2025",quarter:"Fourth",year:2025,publishDate:"2025-10-01",filePath:"public/SAPA-PHILATEX-Fourth-Quarter-2025.pdf",description:"Features the October-December meeting calendar, year-end activities, holiday schedule adjustments, 2026 membership renewal information, upcoming stamp shows, and special programs on postal history and rare stamp collections.",featuredArticles:[{title:"Year in Review",category:"Annual Report",page:3},{title:"Holiday Collecting Guide",category:"Feature",page:5},{title:"2026 Membership Information",category:"News",page:8}],highlights:["October-December meeting calendar","Holiday schedule adjustments","2026 membership renewal","Year-end auction information","Upcoming stamp shows and exhibitions"],tags:["2025","Q4","holidays","year-end","membership","meetings"],pageCount:12,fileSize:"2.5 MB",status:"published"},{id:"2025-Q3",title:"SAPA PHILATEX Third Quarter 2025",quarter:"Third",year:2025,publishDate:"2025-07-01",filePath:"public/SAPA-PHILATEX-Third-Quarter-2025.pdf",description:'Features the July-September meeting calendar, annual "Blue Chip" auction details, Greater Houston Stamp Show information, TSDA show schedule, 2025 membership drive, and programs on US Air Mail History and Classic Mexican Stamps.',featuredArticles:[{title:"US Air Mail History",category:"History",page:3},{title:"Classic Mexican Stamps",category:"Feature",page:5},{title:"Blue Chip Auction Preview",category:"News",page:7}],highlights:["July-September meeting calendar","Annual Blue Chip auction details","Greater Houston Stamp Show information","TSDA show schedule","2025 membership drive"],tags:["2025","auction","meetings","air-mail","mexican-stamps","houston-show"],pageCount:12,fileSize:"2.1 MB",status:"published"},{id:"2025-Q2",title:"SAPA PHILATEX Second Quarter 2025",quarter:"Second",year:2025,publishDate:"2025-04-01",filePath:"public/SAPA PHILATEX Second Quarter 2025.pdf",description:"Contains the April-June meeting schedule, club updates, member spotlights, and special features on recent philatelic discoveries and collecting tips for the spring season.",featuredArticles:[{title:"Spring Collecting Tips",category:"Collection Tips",page:2},{title:"Recent Philatelic Discoveries",category:"Feature",page:4},{title:"Member Spotlight: John Smith",category:"Member Spotlight",page:6}],highlights:["April-June meeting schedule","Club updates","Member spotlights","Recent philatelic discoveries","Spring collecting tips"],tags:["2025","spring","collecting-tips","discoveries","member-spotlight"],pageCount:10,fileSize:"1.8 MB",status:"published"}],metadata:{lastUpdated:"2025-10-01T00:00:00.000Z",totalIssues:3,latestIssue:"2025-Q4",version:"1.0"}}});var A={DEBOUNCE_DEFAULT:500,DEBOUNCE_SEARCH:300,THROTTLE_DEFAULT:1e3,ANIMATION_FRAME_FALLBACK:16,NOTIFICATION_AUTO_DISMISS:1e4,NOTIFICATION_SHORT:2e3,REMINDER_CHECK_INTERVAL:6e4,REMINDER_AUTO_DISMISS:15e3,COPY_FEEDBACK_DURATION:1500,FORM_MESSAGE_SUCCESS_DURATION:1e4,RSVP_CONFIRMATION_DURATION:3e3,RETRY_DELAY_BASE:1e3,SERVICE_WORKER_UPDATE_DISMISS:1e4};var O={GA_MEASUREMENT_ID:"G-XXXXXXXXXX",EVENTS:{PAGE_VIEW:"page_view",FORM_SUBMIT:"form_submit",FILE_DOWNLOAD:"file_download",NEWSLETTER_DOWNLOAD:"newsletter_download",MEETING_RSVP:"meeting_rsvp",SEARCH:"search",RESOURCE_VIEW:"resource_view"}},k={...O.EVENTS,CONTACT_FORM_SUBMIT:"contact_form_submit",SEARCH_PERFORMED:"search_performed",REMINDER_SET:"reminder_set"};function E(t,r=A.DEBOUNCE_DEFAULT){if(typeof t!="function")throw new TypeError("First argument must be a function");let a;return function(...e){let s=()=>{clearTimeout(a),t(...e)};clearTimeout(a),a=setTimeout(s,r)}}function d(t,r=document){try{return r.querySelector(t)}catch(a){return console.warn(`Failed to query selector "${t}":`,a),null}}var c=new Map;function l(t,r,a,n){if(!t||typeof t.addEventListener!="function"){console.warn("Invalid element provided to addEventListenerWithCleanup");return}t.addEventListener(r,a,n),c.has(t)||c.set(t,[]),c.get(t).push({event:r,handler:a,options:n})}function b(t=null){if(t){let r=c.get(t);r&&(r.forEach(({event:a,handler:n,options:e})=>{t.removeEventListener(a,n,e)}),c.delete(t))}else c.forEach((r,a)=>{r.forEach(({event:n,handler:e,options:s})=>{try{a.removeEventListener(n,e,s)}catch(i){console.warn("Failed to remove event listener:",i)}})}),c.clear()}typeof window<"u"&&window.addEventListener("beforeunload",()=>{b()});var h=class{constructor(){this.container=null,this.defaultHome={text:"Home",href:"/"},this.separator="\u203A"}init(r="breadcrumb-nav"){if(this.container=document.getElementById(r),!this.container){console.warn("Breadcrumb container not found");return}this.generateBreadcrumb()}generateBreadcrumb(){let r=window.location.pathname,a=r.split("/").filter(o=>o),n=[this.defaultHome],e=document.title.split(" - ")[0],s=a[a.length-1]||"index.html",i={"index.html":null,"meetings.html":{text:"Meetings",href:"/meetings.html"},"newsletter.html":{text:"Newsletters",href:"/newsletter.html"},"resources.html":{text:"Resources",href:"/resources.html"},"glossary.html":{text:"Glossary",href:"/glossary.html"},"contact.html":{text:"Contact",href:"/contact.html"},"search.html":{text:"Search",href:"/search.html"}};if(r.includes("/newsletters/")?(n.push({text:"Newsletters",href:"/newsletter.html"}),n.push({text:e,href:r,current:!0})):r.includes("/resources/")?(n.push({text:"Resources",href:"/resources.html"}),n.push({text:e,href:r,current:!0})):i[s]&&n.push({...i[s],current:!0}),n.length<=1){this.container.style.display="none";return}this.render(n)}render(r){let a=document.createElement("nav");a.setAttribute("aria-label","Breadcrumb"),a.className="breadcrumb-navigation";let n=document.createElement("ol");n.className="breadcrumb-list",r.forEach((e,s)=>{let i=document.createElement("li");if(i.className="breadcrumb-item",e.current)i.setAttribute("aria-current","page"),i.textContent=e.text;else{let o=document.createElement("a");o.href=e.href,o.textContent=e.text,i.appendChild(o)}if(n.appendChild(i),s<r.length-1){let o=document.createElement("span");o.className="breadcrumb-separator",o.setAttribute("aria-hidden","true"),o.textContent=` ${this.separator} `,n.appendChild(o)}}),a.appendChild(n),this.container.innerHTML="",this.container.appendChild(a)}setBreadcrumb(r){if(!this.container){console.warn("Breadcrumb not initialized");return}this.render([this.defaultHome,...r])}updateCurrent(r){let a=this.container.querySelector('[aria-current="page"]');a&&(a.textContent=r)}},T=new h;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>T.init()):T.init();async function g(){let t=d("#newsletters-container");t&&await M(t);let r=d("#newsletter-search");r&&F(r);let a=d("#newsletter-filters");a&&G(a)}async function M(t){try{let{default:r}=await Promise.resolve().then(()=>f(m())),n=r.newsletters.sort((e,s)=>new Date(s.date)-new Date(e.date)).map(e=>`
            <article class="newsletter-item" data-date="${e.date}" data-year="${new Date(e.date).getFullYear()}">
                <div class="newsletter-preview">
                    ${e.coverImage?`<img src="${e.coverImage}" alt="Cover of ${e.title}" loading="lazy">`:'<div class="newsletter-placeholder">\u{1F4F0}</div>'}
                </div>
                
                <div class="newsletter-content">
                    <header class="newsletter-header">
                        <h3>${e.title}</h3>
                        <time datetime="${e.date}" class="newsletter-date">
                            ${new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}
                        </time>
                    </header>
                    
                    <div class="newsletter-details">
                        ${e.summary?`<p class="newsletter-summary">${e.summary}</p>`:""}
                        
                        ${e.features&&e.features.length>0?`
                            <div class="newsletter-features">
                                <h4>Featured Articles:</h4>
                                <ul>
                                    ${e.features.map(s=>`<li>${s}</li>`).join("")}
                                </ul>
                            </div>
                        `:""}
                        
                        <div class="newsletter-meta">
                            <span class="newsletter-pages">${e.pages||"Multiple"} pages</span>
                            ${e.fileSize?`<span class="newsletter-size">${e.fileSize}</span>`:""}
                        </div>
                    </div>
                    
                    <footer class="newsletter-actions">
                        <a href="${e.pdfUrl}" target="_blank" class="btn-primary btn-view-pdf" data-newsletter-id="${e.id}">
                            \u{1F4C4} View PDF
                        </a>
                        <button class="btn-secondary btn-download" data-url="${e.pdfUrl}" data-title="${e.title}">
                            \u{1F4BE} Download
                        </button>
                        ${e.articleLinks&&e.articleLinks.length>0?`
                            <details class="newsletter-articles">
                                <summary>Articles (${e.articleLinks.length})</summary>
                                <ul>
                                    ${e.articleLinks.map(s=>`
                                        <li><a href="${s.url}" target="_blank">${s.title}</a></li>
                                    `).join("")}
                                </ul>
                            </details>
                        `:""}
                    </footer>
                </div>
            </article>
        `).join("");t.innerHTML=n,$(t)}catch(r){console.error("Failed to load newsletters:",r),t.innerHTML='<p class="error-message">Unable to load newsletters. Please try again later.</p>'}}function F(t){t.innerHTML=`
        <div class="search-container">
            <input type="search" id="newsletter-search-input" placeholder="Search newsletters..." aria-label="Search newsletters">
            <button id="newsletter-search-button" aria-label="Search">\u{1F50D}</button>
        </div>
        <div id="search-results" class="search-results" aria-live="polite"></div>
    `;let r=t.querySelector("#newsletter-search-input"),a=t.querySelector("#newsletter-search-button"),n=t.querySelector("#search-results"),e=E(async s=>{if(!s.trim()){n.innerHTML="",H();return}try{let{default:i}=await Promise.resolve().then(()=>f(m())),o=P(i.newsletters,s);o.length===0?(n.innerHTML="<p>No newsletters found matching your search.</p>",U()):(n.innerHTML=`<p>Found ${o.length} newsletter${o.length!==1?"s":""}</p>`,x(o))}catch(i){console.error("Search failed:",i),n.innerHTML="<p>Search temporarily unavailable.</p>"}},300);l(r,"input",s=>{e(s.target.value)}),l(a,"click",()=>{e(r.value)}),l(r,"keypress",s=>{s.key==="Enter"&&e(r.value)})}function P(t,r){let a=r.toLowerCase().split(" ");return t.filter(n=>{let e=[n.title,n.summary,...n.features||[],new Date(n.date).toLocaleDateString()].join(" ").toLowerCase();return a.every(s=>e.includes(s))})}function x(t){document.querySelectorAll(".newsletter-item").forEach(a=>{let n=a.dataset.date,e=t.some(s=>s.date===n);a.style.display=e?"block":"none"})}function H(){document.querySelectorAll(".newsletter-item").forEach(r=>{r.style.display="block"})}function U(){document.querySelectorAll(".newsletter-item").forEach(r=>{r.style.display="none"})}function G(t){let r=new Date().getFullYear(),a=Array.from({length:5},(o,u)=>r-u);t.innerHTML=`
        <div class="filter-group">
            <label for="year-filter">Year:</label>
            <select id="year-filter">
                <option value="">All Years</option>
                ${a.map(o=>`<option value="${o}">${o}</option>`).join("")}
            </select>
        </div>
        
        <div class="filter-group">
            <label for="sort-filter">Sort By:</label>
            <select id="sort-filter">
                <option value="date-desc">Newest First</option>
                <option value="date-asc">Oldest First</option>
                <option value="title-asc">Title A-Z</option>
                <option value="title-desc">Title Z-A</option>
            </select>
        </div>
        
        <button id="clear-filters" class="btn-secondary">Clear Filters</button>
    `;let n=t.querySelector("#year-filter"),e=t.querySelector("#sort-filter"),s=t.querySelector("#clear-filters"),i=E(()=>{let o=document.querySelectorAll(".newsletter-item"),u=n.value,I=e.value,N=Array.from(o).filter(p=>u&&p.dataset.year!==u?(p.style.display="none",!1):(p.style.display="block",!0));B(N,I)},300);l(n,"change",i),l(e,"change",i),l(s,"click",()=>{n.value="",e.value="date-desc",i()})}function B(t,r){let a=t[0]?.parentElement;a&&(t.sort((n,e)=>{switch(r){case"date-desc":return new Date(e.dataset.date)-new Date(n.dataset.date);case"date-asc":return new Date(n.dataset.date)-new Date(e.dataset.date);case"title-asc":return n.querySelector("h3").textContent.localeCompare(e.querySelector("h3").textContent);case"title-desc":return e.querySelector("h3").textContent.localeCompare(n.querySelector("h3").textContent);default:return 0}}),t.forEach(n=>{a.appendChild(n)}))}function $(t){t.querySelectorAll(".btn-download").forEach(n=>{l(n,"click",e=>{let s=e.target.dataset.url,i=e.target.dataset.title;q(s,i)})}),t.querySelectorAll(".btn-view-pdf").forEach(n=>{l(n,"click",e=>{let s=e.target.dataset.newsletterId;V(s)})})}function q(t,r){try{let a=document.createElement("a");a.href=t,a.download=`${r}.pdf`,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),Y(r)}catch(a){console.error("Download failed:",a),alert("Download failed. Please try opening the PDF in a new tab.")}}function V(t){typeof gtag=="function"&&gtag("event","newsletter_view",{newsletter_id:t})}function Y(t){typeof gtag=="function"&&gtag("event","newsletter_download",{newsletter_title:t})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();})();
