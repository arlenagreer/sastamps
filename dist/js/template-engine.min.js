import{a as c,b as p}from"./chunk-HMLJZ4T4.min.js";var h=class{constructor(){this.templates=new Map,this.helpers=new Map,this.components=new Map,this.registerDefaultHelpers()}registerTemplate(t,s){this.templates.set(t,s)}registerHelper(t,s){this.helpers.set(t,s)}registerComponent(t,s){this.components.set(t,s)}render(t,s={},e={}){let r=t;this.templates.has(t)&&(r=this.templates.get(t));let a=p(c({},s),{$helpers:this.helpers,$components:this.components,$options:e});return this.processTemplate(r,a)}processTemplate(t,s){return t=this.processConditionals(t,s),t=this.processLoops(t,s),t=this.processVariables(t,s),t=this.processComponents(t,s),t}processConditionals(t,s){let e=/\{\{#if\s+([^}]+)\}\}([\s\S]*?)\{\{\/if\}\}/g;return t.replace(e,(r,a,l)=>this.evaluateCondition(a.trim(),s)?this.processTemplate(l,s):"")}processLoops(t,s){let e=/\{\{#each\s+([^}]+)\}\}([\s\S]*?)\{\{\/each\}\}/g;return t.replace(e,(r,a,l)=>{let i=this.getNestedValue(a.trim(),s);return Array.isArray(i)?i.map((n,o)=>{let m=p(c({},s),{this:n,"@index":o,"@first":o===0,"@last":o===i.length-1,"@odd":o%2===1,"@even":o%2===0});return this.processTemplate(l,m)}).join(""):""})}processVariables(t,s){let e=/\{\{([^}]+)\}\}/g;return t.replace(e,(r,a)=>{let l=a.trim();if(l.includes(" "))return this.processHelper(l,s);let i=this.getNestedValue(l,s);return this.escapeHtml(String(i!=null?i:""))})}processComponents(t,s){let e=/\{\{component:(\w+)([^}]*)\}\}/g;return t.replace(e,(r,a,l)=>{if(!this.components.has(a))return console.warn(`Component not found: ${a}`),"";let i=this.components.get(a),n=this.parseComponentArgs(l,s);try{return i(n,s)}catch(o){return console.error(`Error rendering component ${a}:`,o),""}})}processHelper(t,s){let e=t.split(/\s+/),r=e[0],a=e.slice(1);if(!this.helpers.has(r))return console.warn(`Helper not found: ${r}`),"";let l=this.helpers.get(r),i=a.map(n=>n.startsWith('"')&&n.endsWith('"')||n.startsWith("'")&&n.endsWith("'")?n.slice(1,-1):isNaN(n)?n==="true"?!0:n==="false"?!1:this.getNestedValue(n,s):parseFloat(n));try{let n=l(...i,s);return this.escapeHtml(String(n!=null?n:""))}catch(n){return console.error(`Error executing helper ${r}:`,n),""}}parseComponentArgs(t,s){let e={},r=/(\w+)=([^=\s]+)/g,a;for(;(a=r.exec(t))!==null;){let[,l,i]=a;i.startsWith('"')&&i.endsWith('"')||i.startsWith("'")&&i.endsWith("'")?e[l]=i.slice(1,-1):isNaN(i)?i==="true"?e[l]=!0:i==="false"?e[l]=!1:e[l]=this.getNestedValue(i,s):e[l]=parseFloat(i)}return e}evaluateCondition(t,s){let e=this.getNestedValue(t,s);return Array.isArray(e)||typeof e=="string"?e.length>0:typeof e=="number"?e!==0:!!e}getNestedValue(t,s){let e=t.split("."),r=s;for(let a of e){if(r==null)return;r=r[a]}return r}escapeHtml(t){let s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return t.replace(/[&<>"']/g,e=>s[e])}registerDefaultHelpers(){this.registerHelper("formatDate",(t,s="long")=>{if(!t)return"";let e=new Date(t);if(isNaN(e.getTime()))return t;let r={short:{month:"short",day:"numeric",year:"numeric"},long:{weekday:"long",year:"numeric",month:"long",day:"numeric"},time:{hour:"numeric",minute:"2-digit",hour12:!0}};return e.toLocaleDateString("en-US",r[s]||r.long)}),this.registerHelper("truncate",(t,s=100,e="...")=>!t||t.length<=s?t:t.substring(0,s)+e),this.registerHelper("join",(t,s=", ")=>Array.isArray(t)?t.join(s):""),this.registerHelper("upper",t=>String(t).toUpperCase()),this.registerHelper("lower",t=>String(t).toLowerCase()),this.registerHelper("capitalize",t=>String(t).charAt(0).toUpperCase()+String(t).slice(1)),this.registerHelper("default",(t,s="")=>t!=null&&t!==""?t:s),this.registerHelper("add",(t,s)=>Number(t)+Number(s)),this.registerHelper("subtract",(t,s)=>Number(t)-Number(s)),this.registerHelper("multiply",(t,s)=>Number(t)*Number(s)),this.registerHelper("divide",(t,s)=>Number(t)/Number(s)),this.registerHelper("eq",(t,s)=>t===s),this.registerHelper("ne",(t,s)=>t!==s),this.registerHelper("gt",(t,s)=>Number(t)>Number(s)),this.registerHelper("lt",(t,s)=>Number(t)<Number(s)),this.registerHelper("gte",(t,s)=>Number(t)>=Number(s)),this.registerHelper("lte",(t,s)=>Number(t)<=Number(s))}registerSapaComponents(){this.registerComponent("newsletterCard",(t,s)=>{let{newsletter:e}=t;return e?`
                <div class="newsletter-card">
                    <div class="card-header">
                        <h3>${this.escapeHtml(e.title)}</h3>
                        <p class="quarter">${this.escapeHtml(e.quarter)} Quarter ${e.year}</p>
                    </div>
                    <div class="card-content">
                        <p class="publish-date">Published: ${this.helpers.get("formatDate")(e.publishDate,"short")}</p>
                        <p class="description">${this.escapeHtml(e.description)}</p>
                        ${e.highlights?`
                            <ul class="highlights">
                                ${e.highlights.map(r=>`<li>${this.escapeHtml(r)}</li>`).join("")}
                            </ul>
                        `:""}
                        <a href="${e.filePath}" class="btn btn-primary" target="_blank">
                            <i class="fas fa-file-pdf"></i> Download PDF
                        </a>
                    </div>
                </div>
            `:""}),this.registerComponent("meetingCard",(t,s)=>{let{meeting:e}=t;return e?`
                <div class="meeting-card">
                    <div class="card-header">
                        <h3>${this.escapeHtml(e.title||e.topic||"SAPA Meeting")}</h3>
                        <p class="date">${this.helpers.get("formatDate")(e.date)}</p>
                    </div>
                    <div class="card-content">
                        <p class="time">
                            <i class="fas fa-clock"></i>
                            Doors open: ${e.time.doorsOpen}
                            ${e.time.meetingStart?` | Meeting: ${e.time.meetingStart}`:""}
                        </p>
                        <p class="location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${this.escapeHtml(e.location.name)}
                            ${e.location.building?`, ${this.escapeHtml(e.location.building)}`:""}
                        </p>
                        ${e.presenter?`
                            <p class="presenter">
                                <i class="fas fa-user"></i>
                                Presenter: ${this.escapeHtml(e.presenter.name)}
                                ${e.presenter.title?` (${this.escapeHtml(e.presenter.title)})`:""}
                            </p>
                        `:""}
                        ${e.description?`
                            <p class="description">${this.escapeHtml(e.description)}</p>
                        `:""}
                        ${e.specialNotes&&e.specialNotes.length>0?`
                            <div class="special-notes">
                                <strong>Special Notes:</strong>
                                <ul>
                                    ${e.specialNotes.map(r=>`<li>${this.escapeHtml(r)}</li>`).join("")}
                                </ul>
                            </div>
                        `:""}
                    </div>
                </div>
            `:""}),this.registerComponent("resourceCard",(t,s)=>{let{resource:e}=t;return e?`
                <div class="resource-card">
                    <div class="card-header">
                        <h3>${this.escapeHtml(e.title)}</h3>
                        <div class="meta">
                            <span class="difficulty ${e.difficulty}">${this.helpers.get("capitalize")(e.difficulty)}</span>
                            <span class="category">${this.helpers.get("capitalize")(e.category.replace("-"," "))}</span>
                            ${e.estimatedReadTime?`<span class="read-time">${e.estimatedReadTime} min read</span>`:""}
                        </div>
                    </div>
                    <div class="card-content">
                        <p class="summary">${this.escapeHtml(e.summary)}</p>
                        ${e.tags&&e.tags.length>0?`
                            <div class="tags">
                                ${e.tags.map(r=>`<span class="tag">${this.escapeHtml(r)}</span>`).join("")}
                            </div>
                        `:""}
                        <a href="/resources/${e.slug}" class="btn btn-primary">Read More</a>
                    </div>
                </div>
            `:""}),this.registerComponent("glossaryTerm",(t,s)=>{let{term:e}=t;return e?`
                <div class="glossary-term">
                    <h3 class="term-name">${this.escapeHtml(e.term)}</h3>
                    ${e.alternateNames&&e.alternateNames.length>0?`
                        <p class="alternate-names">
                            Also known as: ${e.alternateNames.map(r=>this.escapeHtml(r)).join(", ")}
                        </p>
                    `:""}
                    <p class="definition">${this.escapeHtml(e.definition)}</p>
                    ${e.detailedDescription?`
                        <p class="detailed-description">${this.escapeHtml(e.detailedDescription)}</p>
                    `:""}
                    <div class="term-meta">
                        <span class="category">${this.helpers.get("capitalize")(e.category.replace("-"," "))}</span>
                        <span class="difficulty ${e.difficulty}">${this.helpers.get("capitalize")(e.difficulty)}</span>
                    </div>
                </div>
            `:""})}},u=new h;u.registerSapaComponents();var g=u;typeof window!="undefined"&&(window.templateEngine=u);export{g as default};
