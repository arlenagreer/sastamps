import{a as d,b as g,c as p}from"./chunk-BUV2MSDD.min.js";var v=p("SafeDOM");function n(h){if(typeof h!="string")return"";let e=document.createElement("div");return e.textContent=h,e.innerHTML}var u=p("TemplateEngine"),m=class{constructor(){this.templates=new Map,this.helpers=new Map,this.components=new Map,this.registerDefaultHelpers()}registerTemplate(e,r){this.templates.set(e,r)}registerHelper(e,r){this.helpers.set(e,r)}registerComponent(e,r){this.components.set(e,r)}render(e,r={},t={}){let s=e;this.templates.has(e)&&(s=this.templates.get(e));let o=g(d({},r),{$helpers:this.helpers,$components:this.components,$options:t});return this.processTemplate(s,o)}processTemplate(e,r){return e=this.processConditionals(e,r),e=this.processLoops(e,r),e=this.processVariables(e,r),e=this.processComponents(e,r),e}processConditionals(e,r){let t=/\{\{#if\s+([^}]+)\}\}([\s\S]*?)\{\{\/if\}\}/g;return e.replace(t,(s,o,l)=>this.evaluateCondition(o.trim(),r)?this.processTemplate(l,r):"")}processLoops(e,r){let t=/\{\{#each\s+([^}]+)\}\}([\s\S]*?)\{\{\/each\}\}/g;return e.replace(t,(s,o,l)=>{let i=this.getNestedValue(o.trim(),r);return Array.isArray(i)?i.map((a,c)=>{let $=g(d({},r),{this:a,"@index":c,"@first":c===0,"@last":c===i.length-1,"@odd":c%2===1,"@even":c%2===0});return this.processTemplate(l,$)}).join(""):""})}processVariables(e,r){let t=/\{\{([^}]+)\}\}/g;return e.replace(t,(s,o)=>{let l=o.trim();if(l.includes(" "))return this.processHelper(l,r);let i=this.getNestedValue(l,r);return n(String(i!=null?i:""))})}processComponents(e,r){let t=/\{\{component:(\w+)([^}]*)\}\}/g;return e.replace(t,(s,o,l)=>{if(!this.components.has(o))return u.warn(`Component not found: ${o}`),"";let i=this.components.get(o),a=this.parseComponentArgs(l,r);try{return i(a,r)}catch(c){return u.error(`Error rendering component ${o}:`,c),""}})}processHelper(e,r){let t=e.split(/\s+/),s=t[0],o=t.slice(1);if(!this.helpers.has(s))return u.warn(`Helper not found: ${s}`),"";let l=this.helpers.get(s),i=o.map(a=>a.startsWith('"')&&a.endsWith('"')||a.startsWith("'")&&a.endsWith("'")?a.slice(1,-1):isNaN(a)?a==="true"?!0:a==="false"?!1:this.getNestedValue(a,r):parseFloat(a));try{let a=l(...i,r);return n(String(a!=null?a:""))}catch(a){return u.error(`Error executing helper ${s}:`,a),""}}parseComponentArgs(e,r){let t={},s=/(\w+)=([^=\s]+)/g,o;for(;(o=s.exec(e))!==null;){let[,l,i]=o;i.startsWith('"')&&i.endsWith('"')||i.startsWith("'")&&i.endsWith("'")?t[l]=i.slice(1,-1):isNaN(i)?i==="true"?t[l]=!0:i==="false"?t[l]=!1:t[l]=this.getNestedValue(i,r):t[l]=parseFloat(i)}return t}evaluateCondition(e,r){let t=this.getNestedValue(e,r);return Array.isArray(t)||typeof t=="string"?t.length>0:typeof t=="number"?t!==0:!!t}getNestedValue(e,r){let t=e.split("."),s=r;for(let o of t){if(s==null)return;s=s[o]}return s}registerDefaultHelpers(){this.registerHelper("formatDate",(e,r="long")=>{if(!e)return"";let t=new Date(e);if(isNaN(t.getTime()))return e;let s={short:{month:"short",day:"numeric",year:"numeric"},long:{weekday:"long",year:"numeric",month:"long",day:"numeric"},time:{hour:"numeric",minute:"2-digit",hour12:!0}};return t.toLocaleDateString("en-US",s[r]||s.long)}),this.registerHelper("truncate",(e,r=100,t="...")=>!e||e.length<=r?e:e.substring(0,r)+t),this.registerHelper("join",(e,r=", ")=>Array.isArray(e)?e.join(r):""),this.registerHelper("upper",e=>String(e).toUpperCase()),this.registerHelper("lower",e=>String(e).toLowerCase()),this.registerHelper("capitalize",e=>String(e).charAt(0).toUpperCase()+String(e).slice(1)),this.registerHelper("default",(e,r="")=>e!=null&&e!==""?e:r),this.registerHelper("add",(e,r)=>Number(e)+Number(r)),this.registerHelper("subtract",(e,r)=>Number(e)-Number(r)),this.registerHelper("multiply",(e,r)=>Number(e)*Number(r)),this.registerHelper("divide",(e,r)=>Number(e)/Number(r)),this.registerHelper("eq",(e,r)=>e===r),this.registerHelper("ne",(e,r)=>e!==r),this.registerHelper("gt",(e,r)=>Number(e)>Number(r)),this.registerHelper("lt",(e,r)=>Number(e)<Number(r)),this.registerHelper("gte",(e,r)=>Number(e)>=Number(r)),this.registerHelper("lte",(e,r)=>Number(e)<=Number(r))}registerSapaComponents(){this.registerComponent("newsletterCard",(e,r)=>{let{newsletter:t}=e;return t?`
                <div class="newsletter-card">
                    <div class="card-header">
                        <h3>${n(t.title)}</h3>
                        <p class="quarter">${n(t.quarter)} Quarter ${t.year}</p>
                    </div>
                    <div class="card-content">
                        <p class="publish-date">Published: ${this.helpers.get("formatDate")(t.publishDate,"short")}</p>
                        <p class="description">${n(t.description)}</p>
                        ${t.highlights?`
                            <ul class="highlights">
                                ${t.highlights.map(s=>`<li>${n(s)}</li>`).join("")}
                            </ul>
                        `:""}
                        <a href="${t.filePath}" class="btn btn-primary" target="_blank">
                            <i class="fas fa-file-pdf"></i> Download PDF
                        </a>
                    </div>
                </div>
            `:""}),this.registerComponent("meetingCard",(e,r)=>{let{meeting:t}=e;return t?`
                <div class="meeting-card">
                    <div class="card-header">
                        <h3>${n(t.title||t.topic||"SAPA Meeting")}</h3>
                        <p class="date">${this.helpers.get("formatDate")(t.date)}</p>
                    </div>
                    <div class="card-content">
                        <p class="time">
                            <i class="fas fa-clock"></i>
                            Doors open: ${t.time.doorsOpen}
                            ${t.time.meetingStart?` | Meeting: ${t.time.meetingStart}`:""}
                        </p>
                        <p class="location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${n(t.location.name)}
                            ${t.location.building?`, ${n(t.location.building)}`:""}
                        </p>
                        ${t.presenter?`
                            <p class="presenter">
                                <i class="fas fa-user"></i>
                                Presenter: ${n(t.presenter.name)}
                                ${t.presenter.title?` (${n(t.presenter.title)})`:""}
                            </p>
                        `:""}
                        ${t.description?`
                            <p class="description">${n(t.description)}</p>
                        `:""}
                        ${t.specialNotes&&t.specialNotes.length>0?`
                            <div class="special-notes">
                                <strong>Special Notes:</strong>
                                <ul>
                                    ${t.specialNotes.map(s=>`<li>${n(s)}</li>`).join("")}
                                </ul>
                            </div>
                        `:""}
                    </div>
                </div>
            `:""}),this.registerComponent("resourceCard",(e,r)=>{let{resource:t}=e;return t?`
                <div class="resource-card">
                    <div class="card-header">
                        <h3>${n(t.title)}</h3>
                        <div class="meta">
                            <span class="difficulty ${t.difficulty}">${this.helpers.get("capitalize")(t.difficulty)}</span>
                            <span class="category">${this.helpers.get("capitalize")(t.category.replace("-"," "))}</span>
                            ${t.estimatedReadTime?`<span class="read-time">${t.estimatedReadTime} min read</span>`:""}
                        </div>
                    </div>
                    <div class="card-content">
                        <p class="summary">${n(t.summary)}</p>
                        ${t.tags&&t.tags.length>0?`
                            <div class="tags">
                                ${t.tags.map(s=>`<span class="tag">${n(s)}</span>`).join("")}
                            </div>
                        `:""}
                        <a href="/resources/${t.slug}" class="btn btn-primary">Read More</a>
                    </div>
                </div>
            `:""}),this.registerComponent("glossaryTerm",(e,r)=>{let{term:t}=e;return t?`
                <div class="glossary-term">
                    <h3 class="term-name">${n(t.term)}</h3>
                    ${t.alternateNames&&t.alternateNames.length>0?`
                        <p class="alternate-names">
                            Also known as: ${t.alternateNames.map(s=>n(s)).join(", ")}
                        </p>
                    `:""}
                    <p class="definition">${n(t.definition)}</p>
                    ${t.detailedDescription?`
                        <p class="detailed-description">${n(t.detailedDescription)}</p>
                    `:""}
                    <div class="term-meta">
                        <span class="category">${this.helpers.get("capitalize")(t.category.replace("-"," "))}</span>
                        <span class="difficulty ${t.difficulty}">${this.helpers.get("capitalize")(t.difficulty)}</span>
                    </div>
                </div>
            `:""})}},f=new m;f.registerSapaComponents();var w=f;typeof window!="undefined"&&(window.templateEngine=f);export{w as default};
